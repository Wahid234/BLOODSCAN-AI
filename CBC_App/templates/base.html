

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>CBC-OCR</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root {
      --header-height: 72px;
      --header-bg: #ffffff;
    }

    body {
      padding-top: var(--header-height); /* so content not hidden behind fixed header */
      background: #f7f8fb;
      font-family: "Open Sans", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    .site-header {
      height: var(--header-height);
      background: var(--header-bg);
      transition: box-shadow .2s ease, background-color .2s ease;
      z-index: 1030;
    }

    .site-header.scrolled {
      box-shadow: 0 6px 18px rgba(20,20,40,.08);
      backdrop-filter: blur(4px);
    }

    /* Center the nav links on large screens */
    @media (min-width: 992px) {
      .navbar .navbar-collapse {
        display: flex !important;
        justify-content: center;
      }
    }

    .profile-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: 1px solid rgba(0,0,0,.06);
      background: #fff;
    }

    .navbar-brand img {
      width: 36px;
      height: 36px;
      object-fit: cover;
      border-radius: 50%;
      margin-right: .5rem;
    }

    .nav-link {
      color: #333 !important;
      font-weight: 500;
      padding: .35rem 1rem;
    }

    .right-controls > *:not(:last-child) { margin-right:.75rem; }
  </style>
</head>
<body>
{% block header %}
  <!-- Fixed Header -->
  <header class="site-header fixed-top">
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container">

        <!-- Brand (left) -->
        <a class="navbar-brand d-flex align-items-center" href="{% url 'CBC_App:index' %}">
          <!-- Replace src with your logo if needed -->
          {% comment %} <img src="https://via.placeholder.com/36x36.png?text=C" alt="CBC-OCR Logo"> {% endcomment %}
          <span class="fw-bold">CBC-OCR</span>
        </a>

        <!-- Toggler (visible on small screens) -->
        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
                aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Centered navigation links (collapses on small screens) -->
        <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav mx-auto my-2 my-lg-0">
            <!-- يمكنك تعديل أو إضافة روابط هنا أو تركها لتُملأ من قِبل صفحات فرعية -->
            <li class="nav-item"><a class="nav-link" href="{% url 'CBC_App:index' %}" >Home</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'CBC_App:upload_pdf' %}"> Upload pdf</a></li>
            {% comment %} <li class="nav-item"><a class="nav-link" href="{% url 'CBC_App:upload' %}"> Upload Image</a></li> {% endcomment %}
            <li class="nav-item"><a class="nav-link" href="{% url 'CBC_App:manual_entry' %}">Manual Entry</a></li>
            <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
          </ul>
        </div>

        <!-- Right side controls (Login / Profile) -->
        <div class="d-flex align-items-center right-controls ms-3">

          {% if user.is_authenticated %}
            <!-- When authenticated: show username and Logout (kept logic intact) -->
            <!-- Username as a profile link (styled) -->
            <a class="d-none d-lg-inline-flex align-items-center text-decoration-none" href="#" title="{{ user.username }}">
              <span class="profile-btn me-2" aria-hidden="true">
                <i class="bi bi-person-fill" style="font-size:1.05rem;color:#444;"></i>
              </span>
              <span class="me-2">{{ user.username }}</span>
            </a>

            <!-- Logout link (styled as button on large screens) -->
            <a class="btn btn-outline-secondary btn-sm d-none d-lg-inline-block" href="{% url 'CBC_App:logout' %}">Logout</a>

            <!-- For small screens, show simple nav links in collapsed menu already available,
                 but keep a compact logout icon visible on xs -->
            <a class="d-inline-flex d-lg-none nav-link" href="{% url 'CBC_App:logout' %}" title="Logout">
              <i class="bi bi-box-arrow-right"></i>
            </a>
          {% else %}
            <!-- Not authenticated: show Login and Sign up (logic kept same) -->
            <a class="btn btn-primary btn-sm d-none d-lg-inline-block" href="{% url 'CBC_App:login' %}">
              <i class="bi bi-lock-fill me-1"></i> Login
            </a>

            <a class="btn btn-outline-primary btn-sm d-none d-lg-inline-block" href="{% url 'CBC_App:signup' %}">
              Sign up
            </a>

            <!-- Mobile small icons -->
            <a class="d-inline-flex d-lg-none nav-link" href="{% url 'CBC_App:login' %}" title="Login">
              <i class="bi bi-lock-fill"></i>
            </a>
            <a class="d-inline-flex d-lg-none nav-link" href="{% url 'CBC_App:signup' %}" title="Sign up">
              <i class="bi bi-person-plus"></i>
            </a>
          {% endif %}

        </div>

      </div>
    </nav>
  </header>
{% endblock %}

  <!-- Main content container -->
  <div class="container mt-4">
    {% block content %}{% endblock %}
  </div>

  <!-- Bootstrap JS (bundle includes Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}
  <script>
    // Add shadow on scroll
    (function () {
      const header = document.querySelector('.site-header');
      const threshold = 10;
      function onScroll() {
        if (window.scrollY > threshold) header.classList.add('scrolled');
        else header.classList.remove('scrolled');
      }
      document.addEventListener('scroll', onScroll, { passive: true });
      onScroll();
    })();
  </script>
{% endblock %}
</body>
</html>
